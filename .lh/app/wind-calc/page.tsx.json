{
    "sourceFile": "app/wind-calc/page.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1736992035460,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1736992055568,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -186,9 +186,9 @@\n             {result.lateralEffect !== 0 && (\n               <div className=\"text-xl text-gray-400\">\n                 Aim{' '}\n                 <span className=\"text-2xl font-bold text-emerald-400\">\n-                  {Math.abs(result.lateralEffect)} yards {result.lateralEffect > 0 ? 'right' : 'left'}\n+                  {Math.abs(result.lateralEffect)} yards {result.lateralEffect < 0 ? 'right' : 'left'}\n                 </span>\n               </div>\n             )}\n           </div>\n"
                },
                {
                    "date": 1736992084924,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -186,9 +186,9 @@\n             {result.lateralEffect !== 0 && (\n               <div className=\"text-xl text-gray-400\">\n                 Aim{' '}\n                 <span className=\"text-2xl font-bold text-emerald-400\">\n-                  {Math.abs(result.lateralEffect)} yards {result.lateralEffect < 0 ? 'right' : 'left'}\n+                  {Math.abs(result.lateralEffect)} yards {result.lateralEffect > 0 ? 'right' : 'left'}\n                 </span>\n               </div>\n             )}\n           </div>\n@@ -196,32 +196,32 @@\n           {/* Detailed Effects */}\n           <div className=\"grid grid-cols-2 gap-4 mt-6\">\n             <div className=\"bg-gray-900/30 p-4 rounded-lg border border-gray-700/50\">\n               <div className=\"font-medium mb-2 text-gray-400\">Weather Effect</div>\n-              <div className={`font-semibold ${result.environmentalEffect < 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n-                {result.environmentalEffect < 0 ? '+' : ''}{Math.round(-result.environmentalEffect)} yards\n+              <div className={`font-semibold ${result.environmentalEffect > 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n+                {result.environmentalEffect > 0 ? '+' : ''}{Math.round(result.environmentalEffect)} yards\n               </div>\n             </div>\n             <div className=\"bg-gray-900/30 p-4 rounded-lg border border-gray-700/50\">\n               <div className=\"font-medium mb-2 text-gray-400\">Wind Effect</div>\n-              <div className={`font-semibold ${result.windEffect < 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n-                {result.windEffect < 0 ? '+' : ''}{Math.round(-result.windEffect)} yards\n+              <div className={`font-semibold ${result.windEffect > 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n+                {result.windEffect > 0 ? '+' : ''}{Math.round(result.windEffect)} yards\n               </div>\n             </div>\n             <div className=\"bg-gray-900/30 p-4 rounded-lg border border-gray-700/50\">\n               <div className=\"font-medium mb-2 text-gray-400\">Total Effect</div>\n-              <div className={`font-semibold ${(result.environmentalEffect + result.windEffect) < 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n-                {(result.environmentalEffect + result.windEffect) < 0 ? '+' : ''}{Math.round(-(result.environmentalEffect + result.windEffect))} yards\n+              <div className={`font-semibold ${(result.environmentalEffect + result.windEffect) > 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n+                {(result.environmentalEffect + result.windEffect) > 0 ? '+' : ''}{Math.round(result.environmentalEffect + result.windEffect)} yards\n               </div>\n             </div>\n             <div className=\"bg-gray-900/30 p-4 rounded-lg border border-gray-700/50\">\n               <div className=\"font-medium mb-2 text-gray-400\">Lateral Effect</div>\n               <div className={`font-semibold ${Math.abs(result.lateralEffect) < 5 ? 'text-emerald-400' : 'text-yellow-400'}`}>\n-                {Math.abs(result.lateralEffect)} yards {result.lateralEffect < 0 ? 'right' : 'left'}\n+                {Math.abs(result.lateralEffect)} yards {result.lateralEffect > 0 ? 'right' : 'left'}\n               </div>\n             </div>\n           </div>\n         </div>\n       )}\n     </div>\n   )\n-}\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1736992097054,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -196,32 +196,32 @@\n           {/* Detailed Effects */}\n           <div className=\"grid grid-cols-2 gap-4 mt-6\">\n             <div className=\"bg-gray-900/30 p-4 rounded-lg border border-gray-700/50\">\n               <div className=\"font-medium mb-2 text-gray-400\">Weather Effect</div>\n-              <div className={`font-semibold ${result.environmentalEffect < 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n-                {result.environmentalEffect < 0 ? '+' : ''}{Math.round(-result.environmentalEffect)} yards\n+              <div className={`font-semibold ${result.environmentalEffect > 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n+                {result.environmentalEffect > 0 ? '+' : ''}{Math.round(result.environmentalEffect)} yards\n               </div>\n             </div>\n             <div className=\"bg-gray-900/30 p-4 rounded-lg border border-gray-700/50\">\n               <div className=\"font-medium mb-2 text-gray-400\">Wind Effect</div>\n-              <div className={`font-semibold ${result.windEffect < 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n-                {result.windEffect < 0 ? '+' : ''}{Math.round(-result.windEffect)} yards\n+              <div className={`font-semibold ${result.windEffect > 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n+                {result.windEffect > 0 ? '+' : ''}{Math.round(result.windEffect)} yards\n               </div>\n             </div>\n             <div className=\"bg-gray-900/30 p-4 rounded-lg border border-gray-700/50\">\n               <div className=\"font-medium mb-2 text-gray-400\">Total Effect</div>\n-              <div className={`font-semibold ${(result.environmentalEffect + result.windEffect) < 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n-                {(result.environmentalEffect + result.windEffect) < 0 ? '+' : ''}{Math.round(-(result.environmentalEffect + result.windEffect))} yards\n+              <div className={`font-semibold ${(result.environmentalEffect + result.windEffect) > 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n+                {(result.environmentalEffect + result.windEffect) > 0 ? '+' : ''}{Math.round(result.environmentalEffect + result.windEffect)} yards\n               </div>\n             </div>\n             <div className=\"bg-gray-900/30 p-4 rounded-lg border border-gray-700/50\">\n               <div className=\"font-medium mb-2 text-gray-400\">Lateral Effect</div>\n               <div className={`font-semibold ${Math.abs(result.lateralEffect) < 5 ? 'text-emerald-400' : 'text-yellow-400'}`}>\n-                {Math.abs(result.lateralEffect)} yards {result.lateralEffect < 0 ? 'right' : 'left'}\n+                {Math.abs(result.lateralEffect)} yards {result.lateralEffect > 0 ? 'right' : 'left'}\n               </div>\n             </div>\n           </div>\n         </div>\n       )}\n     </div>\n   )\n-}\n+}\n\\ No newline at end of file\n"
                }
            ],
            "date": 1736992035460,
            "name": "Commit-0",
            "content": "'use client'\n\nimport { usePremium } from '@/lib/premium-context'\nimport { useRouter } from 'next/navigation'\nimport { useEffect, useState } from 'react'\nimport { useShotCalc } from '@/lib/shot-calc-context'\nimport { useEnvironmental } from '@/lib/hooks/use-environmental'\nimport { YardageModelEnhanced, SkillLevel } from '@/lib/yardage-model'\nimport WindDirectionCompass from '@/components/wind-direction-compass'\n\nexport default function WindCalcPage() {\n  const { isPremium } = usePremium()\n  const router = useRouter()\n  const { shotCalcData } = useShotCalc()\n  const { conditions } = useEnvironmental()\n  const [windDirection, setWindDirection] = useState(0)\n  const [windSpeed, setWindSpeed] = useState(10)\n  const [targetYardage, setTargetYardage] = useState(150)\n  const [selectedClub, setSelectedClub] = useState('7-iron')\n  const [result, setResult] = useState<{ \n    environmentalEffect: number\n    windEffect: number\n    lateralEffect: number\n    totalDistance: number \n  } | null>(null)\n  const [yardageModel] = useState(() => new YardageModelEnhanced())\n\n  // Update target yardage when shot calc data changes\n  useEffect(() => {\n    if (shotCalcData.targetYardage) {\n      setTargetYardage(shotCalcData.targetYardage)\n    }\n  }, [shotCalcData.targetYardage])\n\n  useEffect(() => {\n    if (!isPremium) {\n      router.push('/')\n    }\n  }, [isPremium, router])\n\n  const calculateWindEffect = () => {\n    if (!conditions) return;\n\n    // First calculate environmental effects without wind\n    yardageModel.set_conditions(\n      conditions.temperature,\n      conditions.altitude,\n      0,\n      0\n    )\n\n    const envResult = yardageModel.calculate_adjusted_yardage(\n      targetYardage,\n      SkillLevel.INTERMEDIATE,\n      selectedClub\n    )\n\n    // Then calculate with wind added\n    yardageModel.set_conditions(\n      conditions.temperature,\n      conditions.altitude,\n      windSpeed,\n      windDirection\n    )\n\n    const windResult = yardageModel.calculate_adjusted_yardage(\n      targetYardage,\n      SkillLevel.INTERMEDIATE,\n      selectedClub\n    )\n\n    setResult({\n      environmentalEffect: envResult.carry_distance - targetYardage,\n      windEffect: windResult.carry_distance - envResult.carry_distance,\n      lateralEffect: windResult.lateral_movement,\n      totalDistance: windResult.carry_distance\n    })\n\n    // Scroll to results\n    setTimeout(() => {\n      window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' })\n    }, 100)\n  }\n\n  if (!isPremium) {\n    return null\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <h1 className=\"text-3xl font-bold mb-8\">Wind Calculator</h1>\n\n      <div className=\"max-w-xl mx-auto space-y-6 bg-gray-800/50 backdrop-blur-sm p-6 rounded-lg border border-gray-700/50 shadow-xl\">\n        {/* Wind Direction Compass */}\n        <div className=\"flex flex-col items-center\">\n          <div className=\"text-sm font-medium text-gray-400 mb-2 bg-gray-900/50 px-4 py-2 rounded-full\">\n            <span>\n              <span className=\"inline-block w-3 h-3 bg-blue-500 rounded-full mr-1 shadow-lg shadow-blue-500/50\"></span>\n              Wind: {windDirection}°\n            </span>\n          </div>\n          <div className=\"text-sm text-gray-400 mb-4 opacity-75\">\n            Drag the blue handle to set wind direction\n          </div>\n          <div className=\"relative\">\n            <div className=\"absolute inset-0 bg-blue-500/5 rounded-full blur-2xl\"></div>\n            <WindDirectionCompass\n              windDirection={windDirection}\n              shotDirection={0}\n              onChange={(type, degrees) => {\n                if (type === 'wind') {\n                  setWindDirection(degrees)\n                }\n              }}\n              size={280}\n              lockShot={true}\n            />\n          </div>\n        </div>\n\n        {/* Wind Speed Input */}\n        <div className=\"bg-gray-900/30 p-4 rounded-lg border border-gray-700/50\">\n          <div className=\"flex justify-between mb-1\">\n            <label className=\"text-sm font-medium text-gray-400\">Wind Speed</label>\n            <span className=\"text-sm font-medium text-blue-400\">{windSpeed} mph</span>\n          </div>\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"30\"\n            value={windSpeed}\n            onChange={(e) => setWindSpeed(Number(e.target.value))}\n            className=\"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer\"\n          />\n        </div>\n\n        {/* Club Selection */}\n        <div className=\"bg-gray-900/30 p-4 rounded-lg border border-gray-700/50\">\n          <label className=\"block text-sm font-medium text-gray-400 mb-1\">Club</label>\n          <select\n            value={selectedClub}\n            onChange={(e) => setSelectedClub(e.target.value)}\n            className=\"w-full bg-gray-800 text-white rounded-lg px-3 py-2 border border-gray-700\"\n          >\n            <option value=\"driver\">Driver</option>\n            <option value=\"3-wood\">3 Wood</option>\n            <option value=\"5-iron\">5 Iron</option>\n            <option value=\"7-iron\">7 Iron</option>\n            <option value=\"pitching-wedge\">Pitching Wedge</option>\n          </select>\n        </div>\n\n        {/* Target Yardage Input */}\n        <div className=\"bg-gray-900/30 p-4 rounded-lg border border-gray-700/50\">\n          <label className=\"block text-sm font-medium text-gray-400 mb-1\">Target Yardage</label>\n          <input\n            type=\"number\"\n            min=\"50\"\n            max=\"300\"\n            value={targetYardage}\n            onChange={(e) => setTargetYardage(Number(e.target.value))}\n            className=\"w-full px-3 py-2 bg-gray-800/50 rounded text-white border border-gray-700/50 focus:outline-none focus:ring-2 focus:ring-blue-500/50\"\n          />\n        </div>\n\n        {/* Calculate Button */}\n        <button\n          onClick={calculateWindEffect}\n          className=\"w-full py-3 bg-blue-500 hover:bg-blue-600 rounded-lg text-white font-medium transition-all shadow-lg shadow-blue-500/30 hover:shadow-blue-500/50 active:transform active:scale-[0.98]\"\n        >\n          Calculate Wind Effect\n        </button>\n      </div>\n\n      {/* Results Panel */}\n      {result && (\n        <div className=\"max-w-xl mx-auto mt-6 bg-gray-800/50 backdrop-blur-sm p-6 rounded-lg border border-gray-700/50 shadow-xl\">\n          <div className=\"space-y-4\">\n            <div className=\"text-xl text-gray-400\">\n              Play this shot{' '}\n              <span className=\"text-2xl font-bold text-blue-400\">\n                {Math.round(result.totalDistance)} yards\n              </span>\n            </div>\n            \n            {result.lateralEffect !== 0 && (\n              <div className=\"text-xl text-gray-400\">\n                Aim{' '}\n                <span className=\"text-2xl font-bold text-emerald-400\">\n                  {Math.abs(result.lateralEffect)} yards {result.lateralEffect > 0 ? 'right' : 'left'}\n                </span>\n              </div>\n            )}\n          </div>\n\n          {/* Detailed Effects */}\n          <div className=\"grid grid-cols-2 gap-4 mt-6\">\n            <div className=\"bg-gray-900/30 p-4 rounded-lg border border-gray-700/50\">\n              <div className=\"font-medium mb-2 text-gray-400\">Weather Effect</div>\n              <div className={`font-semibold ${result.environmentalEffect < 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n                {result.environmentalEffect < 0 ? '+' : ''}{Math.round(-result.environmentalEffect)} yards\n              </div>\n            </div>\n            <div className=\"bg-gray-900/30 p-4 rounded-lg border border-gray-700/50\">\n              <div className=\"font-medium mb-2 text-gray-400\">Wind Effect</div>\n              <div className={`font-semibold ${result.windEffect < 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n                {result.windEffect < 0 ? '+' : ''}{Math.round(-result.windEffect)} yards\n              </div>\n            </div>\n            <div className=\"bg-gray-900/30 p-4 rounded-lg border border-gray-700/50\">\n              <div className=\"font-medium mb-2 text-gray-400\">Total Effect</div>\n              <div className={`font-semibold ${(result.environmentalEffect + result.windEffect) < 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n                {(result.environmentalEffect + result.windEffect) < 0 ? '+' : ''}{Math.round(-(result.environmentalEffect + result.windEffect))} yards\n              </div>\n            </div>\n            <div className=\"bg-gray-900/30 p-4 rounded-lg border border-gray-700/50\">\n              <div className=\"font-medium mb-2 text-gray-400\">Lateral Effect</div>\n              <div className={`font-semibold ${Math.abs(result.lateralEffect) < 5 ? 'text-emerald-400' : 'text-yellow-400'}`}>\n                {Math.abs(result.lateralEffect)} yards {result.lateralEffect > 0 ? 'right' : 'left'}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}"
        }
    ]
}